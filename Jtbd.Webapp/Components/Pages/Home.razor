@page "/"
@rendermode InteractiveServer
@inject ILogger<Home> Logger
@inject IJSRuntime JSRuntime

<PageTitle>Home</PageTitle>

@* <p>
<strong>Qué es el método de Ward</strong>
    <br />
    El método de Ward es un método jerárquico de agrupamiento que busca minimizar la varianza total dentro de un grupo.
</p>

<br />

<p>
    <strong>Para qué utilizamos el método de Ward en la App Web JTBD</strong>
    <br />
    En la aplicación web JTBD, el método de Ward se emplea para agrupar las historias creadas durante las entrevistas en clusters.
    Este proceso se basa en las agrupaciones previas de Pushes y Pulls, lo que permite organizar los datos de manera jerárquica y minimizar 
    la varianza dentro de cada grupo, asegurando que los elementos dentro de cada clúster sean lo más similares posible entre sí.
</p> *@

@if (cargando)
{
    <div class="modal fade show d-block" tabindex="-1" style="background: rgba(0,0,0,0.5); align-content:center">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="modal-cargando text-lg-center">
                        <div class="spinner-border" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
@code {
    private bool cargando = false;
    [Inject] private NavigationManager NavigationManager { get; set; } = null!;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            NavigationManager.NavigateTo($"proyect/proyectos");
        }
        // No es necesario devolver base.OnAfterRenderAsync, solo llámalo
        await base.OnAfterRenderAsync(firstRender);
    }

    protected override async Task OnInitializedAsync()
    {
        cargando = true;
        Logger.LogInformation("Home component initialized.");
        await Task.CompletedTask;
        cargando = false;
    }
}

<script>
    $(document).ready(function () {
         var EstadoMenu = localStorage.getItem('sidebarState');

         if(EstadoMenu == "collapsed"){
               var sidebar = document.getElementById("sidebardemo");
               var mainContent = document.getElementById("maindemo");
               var miDiv = document.getElementById('divtexto');
               var miDiv2 = document.getElementById('diviconos');
               var miDiv3 = document.getElementById('imgLogo');

               if (sidebar) {
                   sidebar.classList.toggle("collapsed");
                   miDiv.style.display = 'none';
                   miDiv2.style.display = 'block';
                   miDiv3.style.display = 'none';
               } else {
                   console.error("Error: No se encontró elementos ('sidebar')");
               }
               if (mainContent) {
                   mainContent.classList.toggle("expanded");
               } else {
                   console.error("Error: No se encontró elementos ('main-content')");
               }
            }
         console.log("Estado del menú: " + EstadoMenu);
    });

</script>